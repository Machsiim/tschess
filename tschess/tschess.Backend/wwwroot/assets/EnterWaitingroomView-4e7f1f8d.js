import{o as a,c as l,a as t,b as r,e as c,F as d,r as h,s,t as m}from"./index-a0e500f0.js";const g={class:"test"},v={key:0,class:"IchWillDasNicht"},_=t("br",null,null,-1),p={key:1},C=["onClick"],k=t("div",null," Incoming Challenges: ",-1),b={key:0},f=["onClick"],W=["onClick"],y=t("footer",null,[t("p",null,"Â© 2023 Schach Homepage")],-1),$={data(){return{connectedUsers:[],joinedQueue:!1,activeChallenges:[]}},mounted(){},unmounted(){s.leaveWaitingroom()},computed:{},methods:{async connect(){await s.connectWithToken(this.$store.state.infos.token),s.subscribeEvent("SetWaitingroomState",this.addUser),s.subscribeEvent("GetChallenges",this.printChallenges),s.enterWaitingroom(),s.subscribeEvent("GameStarted",this.pushRouter),this.joinedQueue=!0},async enterWaitingroom(){s.enterWaitingroom()},addUser(n){this.connectedUsers=n},challenge(n){s.subscribeEvent("GameStarted",this.pushRouter),s.challenge(n)},printChallenges(n){n[1]==this.$store.state.infos.username&&this.activeChallenges.push(n[0])},processChallenge(n,e){if(n=="accepted"){const o=this.activeChallenges.indexOf(e);o>-1&&this.activeChallenges.splice(o,1),s.startGame(e)}else{const o=this.activeChallenges.indexOf(e);o>-1&&this.activeChallenges.splice(o,1)}},async pushRouter(n){this.$store.commit("joinGame",n),this.leaveWaitingroom(),await this.$router.push("/game/")},leaveWaitingroom(){s.leaveWaitingroom()}}},S=Object.assign($,{__name:"EnterWaitingroomView",setup(n){return(e,o)=>(a(),l("main",null,[t("html",null,[t("section",g,[e.joinedQueue?r("",!0):(a(),l("div",v,[t("button",{onClick:o[0]||(o[0]=i=>{e.connect()})},"Join Queue")])),_,e.joinedQueue?(a(),l("div",p,[t("ul",null,[c(" Connected Users: "),(a(!0),l(d,null,h(e.connectedUsers,i=>(a(),l("div",{key:i},[t("ul",null,[c(m(i)+" ",1),t("button",{onClick:u=>e.challenge(i)},"Challenge",8,C)])]))),128))]),k,e.activeChallenges!=null?(a(),l("div",b,[(a(!0),l(d,null,h(e.activeChallenges,i=>(a(),l("div",{key:i},[t("ul",null,[c(m(i)+" ",1),t("button",{onClick:u=>e.processChallenge("accepted",i)},"Accept",8,f),t("button",{onClick:u=>e.processChallenge("declined",i)},"Decline",8,W)])]))),128))])):r("",!0)])):r("",!0)]),y])]))}});export{S as default};
